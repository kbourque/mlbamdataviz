<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>mlbamdv</title>
        <link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">
 
        <link href="http://getbootstrap.com/examples/justified-nav/justified-nav.css" rel="stylesheet">
 
        <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    </head>
    <body>
            <div class="graph">
                <!-- <svg id="visualisation" width="1000" height="500"></svg> -->
            </div>
        <style type="text/css">
            .axis path,
            .axis line {
                fill: none;
                stroke: black;
                shape-rendering: crispEdges;
            }
            .axis text {
                font-family: sans-serif;
                font-size: 11px;
            }
        </style>
        <script type="text/javascript">


            // must be declared outside
            var dataset3;
            var margin;
            var w2;
            var h2;
            var padding;

            var xScale;
            var yScale;
            var xAxis;
            var yAxis;

            var lineGen;

            var svg2;
            var vis;

            d3.csv("baberuth.csv", function(data){
                // importing data from CSV file
                data.forEach(function(d){ d['Year'] = +d['Year']; }); 
                data.forEach(function(d){ d['WAR'] = +d['WAR']; }); 
                console.log(data);  
                dataset3 = data;
                padding = 30;
                w2 = 1000,
                h2 = 500,
                margin = {
                    top: 20,
                    right: 20,
                    bottom: 20,
                    left: 50
                };

                // adding scales
                xScale = d3.scale.linear()
                         .domain([d3.min(dataset3, function(d) { return d.Year; }), d3.max(dataset3, function(d) { return d.Year; })])
                         .range([padding, w2-padding*2]);
                yScale = d3.scale.linear()
                         .domain([0, d3.max(dataset3, function(d) { return d.WAR; })])
                         .range([h2-padding, padding]);

                // adding x-axis
                xAxis = d3.svg.axis()
                        .scale(xScale)
                        .orient("bottom")
                        .tickFormat(d3.format("d"))
                        .ticks(dataset3.length);
                      
                yAxis = d3.svg.axis()
                        .scale(yScale)
                        .orient("left")
                        .ticks(5);
                vis = d3.select('.graph')
                        .append("svg")
                        .attr('width', w2)
                        .attr('height', h2);

                vis.append("g")
                .attr("class", "axis")
                .attr("transform", "translate(0," + (h2 - padding) + ")")
                .call(xAxis);

                vis.append("g")
                .attr("class", "axis")
                .attr("transform", "translate(" + padding + ",0)")
                .call(yAxis);

                lineGen = d3.svg.line()
                  .x(function(d) {
                    return xScale(d.Year);
                  })
                  .y(function(d) {
                    return yScale(d.WAR);
                  });

                vis.append('svg:path')
                  .attr('d', lineGen(data))
                  .attr('stroke', 'green')
                  .attr('stroke-width', 2)
                  .attr('fill', 'none');

                vis.append("g")
                    .attr("id", "circles")
                    .selectAll("circle")
                    .data(dataset3)
                    .enter()
                    .append("circle")
                    .attr({
                        cx: function(d) {return xScale(d.Year);},
                        cy: function(d) {return yScale(d.WAR);},
                        r: 4
                    });

            });
                    

                // xAxis = d3.svg.axis();

                // // //each axis needs to be told on what scale to operate
                // xAxis.scale(xScale);
                // // // where labels appear
                // xAxis.orient("bottom")
                //     .ticks(5);
                // yAxis = d3.svg.axis()
                //                 .scale(yScale)
                //                 .orient("left")
                //                 .ticks(5);
                // svg2 = d3.select(".graph")
                //     .append("svg")
                //     .attr("width", w2)
                //     .attr("height", h2)
                // // // svg2.append("g")
                // // //     .attr("id", "circles")
                // // //     .attr("clip-path", "url(#chart-area)")
                // // //     .selectAll("circle")
                //    .data(dataset3)
                //    .enter()
                //    .append("circle")
                //    .attr({
                //         cx: function(d) {return xScale(d.Year);},
                //         cy: function(d) {return yScale(d.WAR);},
                //         r: 2
                //    });

                // // //Define clipping path, so that values don't expand past graph
                // // svg2.append("clipPath")                  //Make a new clipPath
                // //     .attr("id", "chart-area")           //Assign an ID
                // //     .append("rect")                     //Within the clipPath, create a new rect
                // //     .attr("x", 0)                 //Set rect's position and sizeâ€¦
                // //     .attr("y", 0)
                // //     .attr("width", w2)
                // //     .attr("height", h2);
                // // creating the axes
                // //Create X axis
                // svg2.append("g")
                //     .attr("class", "axis")
                //     .attr("id", "xaxis")
                //     .attr("transform", "translate(0," + (h2 - padding) + ")")
                //     .call(xAxis);
            
                // //Create Y axis
                // svg2.append("g")
                //     .attr("class", "axis")
                //     .attr("id", "yaxis")
                //     .attr("transform", "translate(" + padding + ",0)")
                //     .call(yAxis);
        </script>
    </body>
</html>